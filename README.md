마이그레이션 이전 프로젝트 주소 : https://github.com/JayMon0327/MAT_ZIP
<hr>

# 🍕 맛집 migration
## [📚 프로젝트 작업일지](https://jaymon.notion.site/5c86177f92e649639e4fa40fa5befac1?pvs=4)


* 스프링 시큐리티 기반의 OAuth2 로그인
* 상품 등록, 재고 관리
* 주문 취소와 배송 관리
* 포인트 적립
* 결제하기

### `Back-end`
* Java 8 ➡️  Java 17
* Spring Framework 5 ➡️  Spring Boot 3.1.6
* Maven ➡️  Gradle
* Mybatis ➡️  JPA

**[추가]**
* Spring Secutiry
* Spring Data JPA, QueryDSL

<hr>

# Docs 문서

**[로그인]**
### OAuth 2.0
- [x] 스프링 시큐리티 적용
    - [x] Security Config 생성
    - [x] UserDetails 클래스 생성

- [x] 유저 권한 설정
    - [x] UserEntity 생성
    - [x] 유저 권한 설정을 위한 Role Enum 생성
    - [x] UserDetailsService 생성

- [x] 기본 로그인 구현
    - [x] UserRepository에 회원찾기 로직 구현
    - [x] UserController 생성
    - [x] loginForm 파일 생성

- [x] 구글, 카카오, 네이버, 페이스북 로그인 구현
    - [x] OAuth2설정 Secutiry Config에 추가
    - [x] OAuth2UserService에 loadUser 메서드로 principal 객체 생성
    - [x] OAuth유저 정보 조회를 위한 UserInfo 생성
    - [x] 구글, 카카오, 네이버, 페이스북 사용자 정보 응답 파라미터에 맞게 UserInfo 생성
    - [x] OAuth userDetails 클래스에 OAuth 로그인 요청 함수 생성
    - [x] loginForm에 소셜 로그인 버튼 생성
    - [x] 미등록 사용자 자동 회원가입 구현

- [x] 회원가입 
  - [x] 회원가입 테스트 코드 작성
  - [x] 회원가입 폼을 위한 회원가입 DTO 정의
  - [x] 회원가입 API를 위한 controller 코드 작성과 프론트 회원가입 폼 작성
  - [x] 요청 파라미터 값의 검증과 공통처리
  - [x] 예외 모니터링을 위한 사용자 정의 예외 클래스 생성과 예외 처리
  - [x] 회원가입 비밀번호 검증과 예외처리 로직 추가

- [x] 회원수정
  - [x] 회원 수정 테스트 코드 작성
  - [x] 회원 수정을 위한 폼 생성
  - [x] 컨트롤러 API 응답을 위한 DTO 생성, 예외 핸들러와 역할 분리
  - [x] 회원 권한 세팅을 위해 스프링 시큐리티 설정 파일 수정
  - [x] 회원 수정 더티체킹을 위한 메서드 생성
  - [x] 회원 수정 로직 구현과 예외처리를 위한 오류코드 추가

**[상품 게시판]**
- [x] 상품 게시판
  - [x] 게시판 등록
    - [x] 게시판 등록, 수정, 삭제 테스트 코드 작성
    - [x] 게시판 등록 API를 위한 controller 코드 작성
    - [x] 게시판 등록 API를 위한 Service 코드 작성
    - [x] 요청 파라미터 값의 검증을 위한 DTO 생성
    - [x] 게시판 등록, 수정 폼 작성
    - [x] REST API 통신을 위한 ajax 작성

  - [x] 상품 등록
    - [x] 상품 등록, 수정, 삭제 테스트 코드 작성
    - [x] 게시판과 상품 정보 분리
    - [x] 게시판 엔티티와 상품 엔티티 연관관계 설정
    - [x] 상품 등록 API를 위한 controller 코드 작성
    - [x] 상품 등록 API를 위한 Service 코드 작성
    - [x] 요청 파라미터 값의 검증을 위한 DTO 생성
    - [x] 상품 등록, 수정 폼 작성
    - [x] REST API 통신을 위한 ajax 작성

  - [x] 이미지 등록
    - [x] 파일 업로드 테스트 코드 작성
    - [x] 파일 업로드 등록, 수정 서비스 코드 작성
    - [x] 상품과 사진의 양방향 연관관계를 연관관계 편의 메서드 작성
    - [x] 파일 업로드를 위한 등록, 수정 컨트롤러 코드와 DTO 작성
    - [x] 이미지 영속성 전이를 위한 상품 게시판 이미지 엔티티와 리뷰 이미지 엔티티 분리
    - [x] multipart/form-data 타입 전송을 위해 ajax 코드와 컨트롤러 코드 수정
    - [x] ajax 통신을 위한 Product 엔티티와 Item 엔티티의 래퍼 Dto 생성
    - [x] 코드 중복 제거를 위해 상품 등록과 수정 서비스 코드 모듈화
    - [x] 판매 정보 DTO 생성
    - [x] 상품 등록 통합 테스트 코드 작성
    - [x] 상품 등록 통합 서비스 코드 작성
    - [x] 상품 등록 통합 컨트롤러 코드 작성

  - [x] 게시판 조회  
    - [x] 상품 리스트 페이지
    - [x] 상품 상세 페이지
      - [x] 상세 페이지 뷰 반환을 위한 뷰 컨트롤러 작성
      - [x] 상세 페이지 ResponseDto 작성
      - [x] 이미지 출력을 위한 이미지 파일 URI 반환 메서드 작성
      - [x] 상세 페이지 템플릿 작성

- [x] 리뷰
  - [x] 리뷰 등록
    - [x] 리뷰 작성 테스트 코드 작성
    - [x] 리뷰 작성을 위한 서비스 코드 작성
    - [x] 파일 업로드를 위해 리뷰 이미지 파일명 변환 메서드 추가
    - [x] 리뷰 작성을 위한 request DTO 작성
    - [x] 리뷰 엔티티에 이미지 엔티티와 연관관계 편의 메서드 설정
    - [x] 리뷰 작성 ajax 코드 작성
    - [x] 리뷰 삭제

  - [x] 리뷰 리스트
    - [x] 상세 페이지 응답 DTO에 리뷰 엔티티와 리뷰 이미지 엔티티 관련 필드 추가
    - [x] 리뷰 조회를 위해 JSP 상세 페이지 수정

- [ ] 상품 검색

- [ ] 관리자 페이지 생성
  - [ ] 관리자 1:1 문의

**[상품 주문]**

- [x] 주문 페이지 이동
  - [x] 주문 페이지에 전달할 Dto 작성
  - [x] 주문 페이지에 전달할 총 구매금액 로직 작성
  - [x] 주문 페이지에 배송정보, 총 구매금액을 ResponseDto로 전달 

- [x] 주문하기
  - [x] 주문 상태 관리
  - [x] 배달 상태 관리
  - [x] 재고 관리
  - [x] 최종 금액 계산
  - [x] 주문 생성
  - [x] 주문 취소


- [x] 포인트
  - [x] 구매 금액의 5% 적립
  - [x] 포인트 사용시 포인트 차감된 금액을 결제

**[상품 결제]**

- [x] 결제하기
  - [x] 결제 요청 페이지
  - [x] 결제 요청 페이지에 전달할 파라미터 정리
  - [x] 결제 API 통신 후 가격 검증 
  - [x] 포인트 계산 처리
  - [x] 결제 확인 및 주문 상태 처리

- [x] 결제 내역 조회
  - [x] 결제 내역 조회 페이징 처리

- [x] 결제 취소
  - [x] 취소 전 API 결제 조회로 결제 금액 검증
  - [x] 재고 원복, 주문 상태 변경
  - [x] 포인트 원복
  - [x] 결제 테이블에 취소 금액 저장
  - [x] 결제 취소 API로 환불처리
  - [x] 프론트 - 결제 조회 페이지에 결제 취소 버튼 추가와 ajax 작성




